function hexToRgb(hex) {
    var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
    return result ? [
        parseInt(result[1], 16),
        parseInt(result[2], 16),
        parseInt(result[3], 16)
    ] : null;
}

function parsePaletteDef(palDef) {
    colors = palDef.match(/.{8}/g);
    colors = colors.map(function(s) {return s.substring(2)});
    colors = colors.map(hexToRgb);
    return colors;
}

var pal1 = "00656879006F688200736B8100786F8000796E7D007A6E7B0079697C0079657D00815D7D0084617C0088667B008E718000947C8500978980009B977C009A9A7C009A9E7D0091A181008C9A7B0087937600858F7200848C6F00858A6E0086886D0086876B0080896C007B8B6E00719072006796760060987800599A7A004F9A7E004093830033838200337A820033728300396980003F607E00465E7D004E5D7D00636E7B006C757B00757C7C007D7F7B0085827A0084837800838577007D8576007C8272007C7F6500777D6400737C6300717C64006F7C66006E7D66006D7E67005C807200557D77004E7A7C0050797800537975005378720054786F005978650064735B007E6E4A00826F3F00877034008A6E2F008D6D2A0098662A009F682C00A46F2C00A6742E00A9793000A57F3500A1863A009D8941009A8D480092985400909B600092A07D0093A9880095B293009AB292009FB29100A5A39200A5988C00A3888100A37B7A00A36E7400A4696E00A6646800A26362009C655E00956D5E0091725A008A7D5500877D5200847D5000847B4F00857A4E008C7951008F7C52008C764F008874550085725C00836E6000826B64007C646C007A5873007F517D00894C84008D45840091448600954389009E498F009F539400946596008970A2008287AB007F87AC007C88AD007882AF00747DB1007070A7006F669B006C5C8F0069538D00694B7C00684E79006752770068607900696B77006F71710071736E00767074007A6A75007F6476007F6374007F627300805E750080597F007C5087006C4C87004D46890049438C0045418F003D3E8F00363F8C00333C8C0037388F003D338C003E328A003F328900483289004A358B004F3B8C004C428A00564D88005E5585005D6284005B608500595F8600525788004C4C88004447870041408500463C890049408A004C448B00544E8F005F5F9B006C6CA500757EB1008187B8008B8FC6009A94C9009DA2CC00A4A4C200A4A1B700A59AA7009CA19B008CA69200779F8A0078A18C0079A38E0079AE9A007EB5A80089B7B60096B8BF009EBCC200A1C0C600A4C3C900A5C3CC009EC1CB0092BEC80083BBC70080B1CC0081A9CF0087A2D0008C9FCB009395C8009995BA009E97A800A79D9A00B39A9600BA9A9B00B59CA000B29FA700B5A2AD00BEA5BA00BFA5C100BBA7C300B3ABB900ABB4B000A6B8A100A0B698009AAF92008FA8910089A59000869B8F0088929300868996008689960085889000898989008C8580009388740095886900988D5E00968B5600988E50009A8D49009B924A0090974F00849C5A007BA6630078AD6C007CB57A007EB385007EB08D0078A98C007CA18C0085928C008A818B008277850075697F00695D7D0060527D005B53770058597100535B700053547C00534F7F005E5980";

function buildPaletteFn(pal) {
    return function(val) {var index = Math.floor(val); return pal[index];};
}

var palette1 = buildPaletteFn(parsePaletteDef(pal1));